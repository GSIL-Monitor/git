-- 成长档案建立后换班更新班级信息数据
update    zxyab_school_ext_1005.wct_growup_record a join 
zxyab_school_ext_1005.wct_student_info b on a.stu_uid =b.stu_uid  join 
zxyab_school_ext_1005.wct_org_school_dept c on b.dept_id=c.dept_id and b.school_id = b.school_id 
set a.dept_id = b.dept_id,a.dept_name = c.dept_name
where a.stu_uid ='f8487c91-ac2e-11e8-8e7e-52540085e817';


-- 成长档案更新档案未完成档案显示已完成的错误数据。
update zxyab_school_ext_1005.wct_growup_record a
join zxyab_school_ext_1005.wct_growup_page_instance b on a.record_uid = b.growup_record_uid and a.is_finish='Y' and b.is_finish='N'
set a.is_finish = 'N';

update zxyab_school_ext_1005.wct_growup_record 
set pdffile_url='',microfilm_url=''
where is_finish='N' and (pdffile_url<>'' or microfilm_url<>'');

--成长档案wct_growup_page_instance的role_type 为none 数据修复
update  zxyab_school_ext_1031.wct_growup_page_instance a join 
zxyab_school_ext_1031.wct_growup_page_instance b on a.subject_name = b.subject_name and a.record_uid=b.record_uid and a.list_order= b.list_order
set a.role_type = b.role_type
where  a.role_type='none' and a.is_active='Y' and b.is_active='Y' and b.growup_record_uid=''